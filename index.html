<html>
  <head>
    <title>Rock, Paper, Scissors</title>
  </head>
  <body>
  	<script>
  		// Alert the player on how to start the game 
  		alert("To begin, enter game() into your browser's console.");
    	console.info("To begin, enter game() into the console.");

    	// Controls the game rules
    	function game() {
    		var playerWins = 0;
      		var computerWins = 0;
      		var ties = 0;

      		var roundNumber = 1;
      		const totalRounds = 5

      		// Play a round of RPS until the total amount of rounds is reached
      		for (roundNumber; roundNumber <= totalRounds; ++roundNumber) {
      			let result = round(); 

				if (result === 1) {
	      			playerWins++;
		    	} else if (result === -1) {
		    		computerWins++;
		    	} else if (result === 0) {
		    		ties++; 
		    	} else {
		    		// Player input invalid choice. Retry the round 
		    		--roundNumber;
		    	}
      		}
      		// Display win/loss/tie record
      		console.log(`Player has ${playerWins} wins and computer has ${computerWins} wins. There are ${ties} ties.`);

      		// Display winner of game 
      		if (playerWins > computerWins) {
      			console.log("Player wins the game!");
      		} else if (computerWins > playerWins) {
      			console.log("Computer wins the game!");
      		} else { 
      			console.log("It's a tie game!");
      		}

	    	function round() { 
	    		// Round calculations
		    	const player = playerChoice();
		    	const computer = computerPlay(); 
		    	let result = playRound(player, computer);
		    	return result; 

		    	// Round functions 
		    	function playRound(playerSelection, computerSelection) {
		    		if (playerSelection === computerSelection) {
		    			console.log(`Tie! You both chose ${playerSelection}!`);
		    			return 0;

		    		} else if ((playerSelection === "rock" && computerSelection === "scissors")
		    			|| (playerSelection === "scissors" && computerSelection === "paper")
		    			||(playerSelection === "paper" && computerSelection === "rock")) {
		    			console.log(`You won, ${playerSelection} beats ${computerSelection}`);
		    			return 1;

		    		} else if ((computerSelection === "rock" && playerSelection === "scissors")
		    			|| (computerSelection === "scissors" && playerSelection === "paper")
		    			||(computerSelection === "paper" && playerSelection === "rock")) {
		    			console.log(`You lost, ${computerSelection} beats ${playerSelection}`);
		    			return -1; 

		    		} else {
		    			console.log("Something went wrong... try again")
		    		}
		    	}

		    	function playerChoice() {
			    	let choice = prompt("Rock, paper, or scissors?");
					
					if (typeof choice !== "string" || 
						(choice.toLowerCase() !== "rock" && choice.toLowerCase() !== "paper" && choice.toLowerCase() !== "scissors")) {
			        	console.error("Error. Please make a valid choice");
			      	} else {
			      		return choice.toLowerCase();
			      	}
			    }

		  		function computerPlay() {
					let choice = Math.floor(Math.random() * 3);

					if (choice === 0) { return "rock"; }
					else if (choice === 1) { return "paper"; }
					else { return "scissors"; }

		  			return choice;
		  		}
	  		}
  		}
  	</script>
  </body>
</html>